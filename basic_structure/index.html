<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Basic Structure of a Visual Novel - PygameVN</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Basic Structure of a Visual Novel";
        var mkdocs_page_input_path = "basic_structure.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PygameVN
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Galery/">Galery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../introduction_pygame/">Introduction to Pygame</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setting_up_environment/">Setting Up the Environment</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Basic Structure of a Visual Novel</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#basic-structure-of-a-visual-novel">Basic Structure of a Visual Novel</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#introduction-screen-with-animation">Introduction Screen with Animation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#advanced-dialog-and-text-system">Advanced Dialog and Text System</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#json-file-structure">JSON File Structure</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dynamic-image-and-background-management">Dynamic Image and Background Management</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#election-system-with-effects">Election System with Effects</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#complete-saving-and-loading-system">Complete Saving and Loading System</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../displaying_images_backgrounds/">Displaying Images and Backgrounds</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../displaying_text_dialogues/">Displaying Text and Dialogues</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../handling_choices_decisions/">Handling Choices and Decisions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../game_state_management/">Game State Management</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../music_sound_effects/">Music and Sound Effects</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../basic_animations/">Basic Animations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../save_load_system/">Save and Load System</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../optimization_best_practices/">Optimization and Best Practices</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PygameVN</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Basic Structure of a Visual Novel</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="basic-structure-of-a-visual-novel-in-pygame">Basic Structure of a Visual Novel in Pygame</h1>
<h2 id="introduction">Introduction</h2>
<p>A visual novel is a video game genre that focuses on narrative and interaction through player decisions. In Pygame, a Python library for game development, you can create visual novels efficiently. This documentation details the basic structure and provides examples to help you build a visual novel using Pygame.</p>
<h2 id="basic-structure-of-a-visual-novel">Basic Structure of a Visual Novel</h2>
<p>A visual novel generally consists of the following parts:</p>
<ul>
<li>Introduction Screen</li>
<li>Dialog and Text Management</li>
<li>Image and Background Management</li>
<li>Choice Options</li>
<li>Saving and Loading System</li>
</ul>
<h3 id="introduction-screen-with-animation">Introduction Screen with Animation</h3>
<p>Instead of a static screen, you can add a simple animation to make the introduction more attractive.</p>
<p>Example:</p>
<pre><code class="language-python">import pygame
import sys
import time

pygame.init()

# Display configuration
screen = pygame.display.set_mode((800, 600))
pygame.display.set_caption(&quot;TÃ­tulo de la Novela Visual&quot;)

# Colors and font
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
font = pygame.font.Font(None, 74)

def show_intro_screen():
    logo = pygame.image.load('logo.png')  # Make sure you have a logo
    logo_rect = logo.get_rect(center=(400, 300))

    clock = pygame.time.Clock()
    start_time = time.time()
    duration = 5  # Animation duration in seconds

    while True:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                sys.exit()

            if event.type == pygame.KEYDOWN:
                if event.key == pygame.K_RETURN:  # Press Enter to start
                    return

        elapsed_time = time.time() - start_time
        if elapsed_time &lt; duration:
            screen.fill(WHITE)
            alpha = int(255 * (elapsed_time / duration))
            logo.set_alpha(alpha)
            screen.blit(logo, logo_rect)
        else:
            return

        pygame.display.flip()
        clock.tick(60)

show_intro_screen()
</code></pre>
<h3 id="advanced-dialog-and-text-system">Advanced Dialog and Text System</h3>
<p>Example:</p>
<pre><code class="language-python">import pygame
import json
import sys
import time

# IPygame initialization
pygame.init()

# Display configuration
screen = pygame.display.set_mode((800, 600))
pygame.display.set_caption(&quot;Visual Novel Title&quot;)

# Colors and fonts
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
dialogue_font = pygame.font.Font(None, 36)

def load_dialogues(filename='dialogues.json'):
    with open(filename, 'r') as file:
        return json.load(file)

def show_text(dialogues, scene_name, text_speed=0.05):
    screen.fill(WHITE)
    scene_dialogues = dialogues.get(scene_name, [])
    y_offset = 50

    for dialogue in scene_dialogues:
        character = dialogue.get('character', 'Unknown')
        text = dialogue.get('text', '')

        # Show character name
        character_surface = dialogue_font.render(f&quot;{character}:&quot;, True, BLACK)
        screen.blit(character_surface, (50, y_offset))
        y_offset += 40

        # Show text with writing effect
        temp_text = &quot;&quot;
        for char in text:
            temp_text += char
            screen.fill(WHITE)
            screen.blit(character_surface, (50, y_offset - 40))
            text_surface = dialogue_font.render(temp_text, True, BLACK)
            screen.blit(text_surface, (50, y_offset))
            pygame.display.flip()
            time.sleep(text_speed)

        y_offset += 40

        # Wait until the player presses a key.
        waiting = True
        while waiting:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    pygame.quit()
                    sys.exit()
                if event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_SPACE:  # Advance with the space bar
                        waiting = False

def main():
    dialogues = load_dialogues()

    # Show the first scene
    show_text(dialogues, 'scene1')

    # Show the second scene
    show_text(dialogues, 'scene2')

if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<h3 id="json-file-structure">JSON File Structure</h3>
<p>First, create a JSON file containing your dialogs. This file can be structured as follows:</p>
<p>dialogues.json
Example:</p>
<pre><code class="language-json">{
    &quot;scene1&quot;: [
        {
            &quot;character&quot;: &quot;Starring&quot;,
            &quot;text&quot;: &quot;Hello, welcome to the visual novel.&quot;
        },
        {
            &quot;character&quot;: &quot;Narrator&quot;,
            &quot;text&quot;: &quot;This is where your adventure begins.&quot;
        }
    ],
    &quot;scene2&quot;: [
        {
            &quot;character&quot;: &quot;Starring&quot;,
            &quot;text&quot;: &quot;What do you want to do today?&quot;
        },
        {
            &quot;character&quot;: &quot;Option 1&quot;,
            &quot;text&quot;: &quot;Go to the store.&quot;
        },
        {
            &quot;character&quot;: &quot;Option 2&quot;,
            &quot;text&quot;: &quot;Go to the park&quot;
        }
    ]
}
</code></pre>
<h3 id="dynamic-image-and-background-management">Dynamic Image and Background Management</h3>
<p>You can manage multiple backgrounds and characters, as well as dynamically change depending on the story.</p>
<p>Example:</p>
<pre><code class="language-python">def show_background(image_path):
    background = pygame.image.load(image_path)
    screen.blit(background, (0, 0))
    pygame.display.flip()

def show_character(image_path, position, scale_factor=1.0):
    character = pygame.image.load(image_path)
    if scale_factor != 1.0:
        new_size = (int(character.get_width() * scale_factor), int(character.get_height() * scale_factor))
        character = pygame.transform.scale(character, new_size)
    screen.blit(character, position)
    pygame.display.flip()

def update_scene(background_path, character_paths):
    show_background(background_path)
    for character, pos, scale in character_paths:
        show_character(character, pos, scale)

# Example of use
update_scene('background1.png', [('character1.png', (100, 400), 1.0), ('character2.png', (300, 400), 0.8)])
</code></pre>
<h3 id="election-system-with-effects">Election System with Effects</h3>
<p>Choice options can have visual and sound effects to enhance the experience.</p>
<p>Example:</p>
<pre><code class="language-python">import pygame

def show_choices(choices):
    screen.fill(WHITE)
    choice_font = pygame.font.Font(None, 36)
    y_offset = 400
    choice_rects = []

    for idx, choice in enumerate(choices):
        choice_text = choice_font.render(f&quot;{idx + 1}. {choice}&quot;, True, BLACK)
        choice_rect = choice_text.get_rect(topleft=(50, y_offset))
        screen.blit(choice_text, choice_rect.topleft)
        choice_rects.append(choice_rect)
        y_offset += 40

    pygame.display.flip()

    # Election sound effect
    selection_sound = pygame.mixer.Sound('select.wav') # You can use any type of audio file

    while True:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                pygame.quit()
                sys.exit()
            if event.type == pygame.KEYDOWN:
                if event.key in (pygame.K_1, pygame.K_2):  # Assuming there are 2 options
                    selection_sound.play()
                    return int(event.key) - pygame.K_1

choices = [&quot;Go to the store&quot;, &quot;Go to the park&quot;]
chosen_option = show_choices(choices)
print(f&quot;You chose the option {chosen_option + 1}&quot;)
</code></pre>
<h3 id="complete-saving-and-loading-system">Complete Saving and Loading System</h3>
<p>Implement a save system that can handle multiple game states and data.</p>
<p>Example:</p>
<pre><code class="language-python">import pickle

def save_game(state, filename='savegame.pkl'):
    with open(filename, 'wb') as f:
        pickle.dump(state, f)

def load_game(filename='savegame.pkl'):
    try:
        with open(filename, 'rb') as f:
            return pickle.load(f)
    except FileNotFoundError:
        return None

game_state = {
    'scene': 'intro',
    'dialogue': 'Welcome',
    'choices_made': [1],
    'character_positions': {'protagonist': (100, 400)},
    'background': 'background1.png'
}
save_game(game_state)

loaded_state = load_game()
if loaded_state:
    print(&quot;Loaded state:&quot;)
    print(f&quot;Scene: {loaded_state['scene']}&quot;)
    print(f&quot;Dialogue: {loaded_state['dialogue']}&quot;)
    print(f&quot;Choices made: {loaded_state['choices_made']}&quot;)
    print(f&quot;Character positions: {loaded_state['character_positions']}&quot;)
    print(f&quot;Background: {loaded_state['background']}&quot;)
</code></pre>
<h1 id="remember">Remember</h1>
<p>Remember that these codes found in this documentation are examples and for them to work perfectly they have to be more complex systems.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../setting_up_environment/" class="btn btn-neutral float-left" title="Setting Up the Environment"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../displaying_images_backgrounds/" class="btn btn-neutral float-right" title="Displaying Images and Backgrounds">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../setting_up_environment/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../displaying_images_backgrounds/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
