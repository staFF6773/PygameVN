<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Game State Management - PygameVN</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Game State Management";
        var mkdocs_page_input_path = "game_state_management.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PygameVN
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../Galery/">Galery</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../introduction_pygame/">Introduction to Pygame</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setting_up_environment/">Setting Up the Environment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../basic_structure/">Basic Structure of a Visual Novel</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../displaying_images_backgrounds/">Displaying Images and Backgrounds</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../displaying_text_dialogues/">Displaying Text and Dialogues</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../handling_choices_decisions/">Handling Choices and Decisions</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Game State Management</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#key-concepts">Key Concepts</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#implementation-overview">Implementation Overview</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#define-game-states">Define Game States</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#create-a-state-manager">Create a State Manager</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#define-state-classes">Define State Classes</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#integrate-state-manager-with-main-game-loop">Integrate State Manager with Main Game Loop</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-use-cases">Example Use Cases</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#switching-from-main-menu-to-story">Switching from Main Menu to Story</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#adding-more-states">Adding More States</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../music_sound_effects/">Music and Sound Effects</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../basic_animations/">Basic Animations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../save_load_system/">Save and Load System</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../optimization_best_practices/">Optimization and Best Practices</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PygameVN</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Game State Management</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="game-state-management-in-a-visual-novel-using-pygame">Game State Management in a Visual Novel using Pygame</h1>
<h2 id="introduction">Introduction</h2>
<p>Game state management is crucial in a visual novel to control the flow of the story, handle different game modes, and ensure smooth transitions between scenes. In Pygame, managing the state involves setting up a system to track and switch between various states of the game, such as the main menu, story scenes, and settings.</p>
<h2 id="key-concepts">Key Concepts</h2>
<ul>
<li>
<p>Game State: Represents the current condition or mode of the game (e.g., Main Menu, In-Game, Settings).</p>
</li>
<li>
<p>State Manager: A system or class responsible for handling state transitions and maintaining the current state.</p>
</li>
<li>
<p>State Transitions: The process of moving from one state to another based on user inputs or game events.</p>
</li>
</ul>
<h2 id="implementation-overview">Implementation Overview</h2>
<p>The game state management system can be implemented using a combination of Python classes and Pygame functions. Hereâ€™s a step-by-step guide:</p>
<h3 id="define-game-states">Define Game States</h3>
<p>Create a set of constants or an enumeration to represent different game states.</p>
<pre><code class="language-python"># game_states.py
MAIN_MENU = 0
STORY = 1
SETTINGS = 2
GAME_OVER = 3
</code></pre>
<h3 id="create-a-state-manager">Create a State Manager</h3>
<p>The State Manager class is responsible for holding the current state and handling state transitions.</p>
<pre><code class="language-python"># state_manager.py
import pygame
from game_states import MAIN_MENU, STORY, SETTINGS, GAME_OVER

class StateManager:
    def __init__(self):
        self.current_state = MAIN_MENU

    def set_state(self, new_state):
        self.current_state = new_state

    def get_state(self):
        return self.current_state
</code></pre>
<h3 id="define-state-classes">Define State Classes</h3>
<p>Each state can be represented by a class that handles its own logic and rendering.</p>
<pre><code class="language-python"># main_menu.py
import pygame

class MainMenu:
    def __init__(self, screen):
        self.screen = screen
        self.font = pygame.font.Font(None, 74)
        self.title = self.font.render('Main Menu', True, (255, 255, 255))

    def update(self):
        # Handle input and update logic here
        pass

    def render(self):
        self.screen.fill((0, 0, 0))  # Black background
        self.screen.blit(self.title, (100, 100))  # Render title
</code></pre>
<pre><code class="language-python"># story.py
import pygame

class Story:
    def __init__(self, screen):
        self.screen = screen
        self.font = pygame.font.Font(None, 36)
        self.text = self.font.render('Story Scene', True, (255, 255, 255))

    def update(self):
        # Handle input and update logic here
        pass

    def render(self):
        self.screen.fill((0, 0, 0))  # Black background
        self.screen.blit(self.text, (50, 50))  # Render text
</code></pre>
<h3 id="integrate-state-manager-with-main-game-loop">Integrate State Manager with Main Game Loop</h3>
<p>Modify the main game loop to use the State Manager and handle state transitions.</p>
<pre><code class="language-python"># main.py
import pygame
from state_manager import StateManager
from main_menu import MainMenu
from story import Story
from game_states import MAIN_MENU, STORY

def main():
    pygame.init()
    screen = pygame.display.set_mode((800, 600))
    clock = pygame.time.Clock()

    state_manager = StateManager()
    states = {
        MAIN_MENU: MainMenu(screen),
        STORY: Story(screen),
    }

    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        current_state = state_manager.get_state()
        states[current_state].update()
        states[current_state].render()

        pygame.display.flip()
        clock.tick(30)  # Frame rate

    pygame.quit()

if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<h2 id="example-use-cases">Example Use Cases</h2>
<h3 id="switching-from-main-menu-to-story">Switching from Main Menu to Story</h3>
<p>You can handle transitions between states based on user inputs.</p>
<pre><code class="language-python"># main_menu.py (updated)
def update(self):
    for event in pygame.event.get():
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_RETURN:  # Press Enter to start the story
                state_manager.set_state(STORY)
</code></pre>
<h3 id="adding-more-states">Adding More States</h3>
<p>You can expand the system by adding new states like Settings or Game Over.</p>
<pre><code class="language-python"># settings.py
import pygame

class Settings:
    def __init__(self, screen):
        self.screen = screen
        self.font = pygame.font.Font(None, 36)
        self.text = self.font.render('Settings', True, (255, 255, 255))

    def update(self):
        # Handle input and update logic here
        pass

    def render(self):
        self.screen.fill((0, 0, 0))  # Black background
        self.screen.blit(self.text, (50, 50))  # Render text
</code></pre>
<p>Update <code>main.py</code> to include the new state:</p>
<pre><code class="language-python"># main.py (updated)
from settings import Settings
from game_states import SETTINGS

states = {
    MAIN_MENU: MainMenu(screen),
    STORY: Story(screen),
    SETTINGS: Settings(screen),
}
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../handling_choices_decisions/" class="btn btn-neutral float-left" title="Handling Choices and Decisions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../music_sound_effects/" class="btn btn-neutral float-right" title="Music and Sound Effects">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../handling_choices_decisions/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../music_sound_effects/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
